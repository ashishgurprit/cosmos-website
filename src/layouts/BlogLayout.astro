---
import Layout from './Layout.astro';

interface Props {
  title: string;
  description: string;
  publishedAt?: string;
  author?: string;
  authorTitle?: string;
  category?: string;
  readTime?: string;
  heroImage?: string;
}

const {
  title,
  description,
  publishedAt,
  author = "Ashish Ganda",
  authorTitle = "Founder, Cosmos Web Tech",
  category,
  readTime,
  heroImage
} = Astro.props;
---

<Layout title={title} description={description}>
  <header class="header">
    <div class="container">
      <nav class="nav">
        <a href="/" class="logo">
          <div class="logo-icon">
            <svg viewBox="0 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="25" cy="10" r="3" fill="#1e3a5f"/>
              <circle cx="10" cy="35" r="2.5" fill="#3b82f6"/>
              <circle cx="40" cy="35" r="2.5" fill="#3b82f6"/>
              <circle cx="25" cy="42" r="2" fill="#64748b"/>
              <line x1="25" y1="13" x2="12" y2="33" stroke="#1e3a5f" stroke-width="1.5"/>
              <line x1="25" y1="13" x2="38" y2="33" stroke="#1e3a5f" stroke-width="1.5"/>
              <line x1="12" y1="35" x2="38" y2="35" stroke="#3b82f6" stroke-width="1.5"/>
            </svg>
          </div>
          <div class="logo-text">
            <span class="brand-name">Cosmos Web Tech</span>
            <span class="brand-tagline">Your Digital Universe</span>
          </div>
        </a>
        <ul class="nav-links">
          <li><a href="/">Home</a></li>
          <li><a href="/services">Services</a></li>
          <li><a href="/portfolio">Portfolio</a></li>
          <li><a href="/demos">Demos</a></li>
          <li><a href="/blog">Blog</a></li>
          <li><a href="/resources">Resources</a></li>
          <li><a href="/about">About</a></li>
          <li><a href="/contact" class="btn btn-primary btn-small">Get Quote</a></li>
        </ul>
        <button class="mobile-menu-btn" aria-label="Toggle menu">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="18" x2="21" y2="18"/>
          </svg>
        </button>
      </nav>
    </div>
  </header>

  <article class="blog-post">
    <div class="container">
      {(category || publishedAt || readTime) && (
        <header class="post-header">
          {(category || publishedAt) && (
            <div class="post-meta">
              {category && <span class="post-category">{category}</span>}
              {publishedAt && <span class="post-date">{new Date(publishedAt).toLocaleDateString('en-AU', { day: 'numeric', month: 'short', year: 'numeric' })}</span>}
            </div>
          )}
          {readTime && (
            <div class="post-info">
              <span class="read-time">{readTime}</span>
            </div>
          )}
        </header>
      )}

      {heroImage && (
        <div class="post-featured-image">
          <img src={heroImage} alt={title} />
        </div>
      )}

      <div class="post-content">
        <slot />
      </div>
    </div>
  </article>
</Layout>

<style>
  .blog-post {
    padding: 6rem 0 4rem;
    background: white;
  }

  .post-header {
    margin-bottom: 2rem;
    text-align: center;
  }

  .post-meta {
    display: flex;
    gap: 1rem;
    justify-content: center;
    margin-bottom: 1rem;
    flex-wrap: wrap;
  }

  .post-category {
    background: var(--accent);
    color: white;
    padding: 0.375rem 0.875rem;
    border-radius: 20px;
    font-size: 0.875rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .post-date {
    color: var(--grey);
    font-size: 0.95rem;
  }

  .post-info {
    display: flex;
    gap: 1.5rem;
    justify-content: center;
    color: var(--grey);
    font-size: 0.95rem;
  }

  .read-time::before {
    content: 'â± ';
  }

  .post-featured-image {
    margin: 2rem 0 3rem;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: var(--shadow-lg);
  }

  .post-featured-image img {
    width: 100%;
    height: auto;
    display: block;
  }

  .post-content {
    max-width: 800px;
    margin: 0 auto;
    font-size: 1rem; /* 16px base - standard web size */
    line-height: 1.65;
    color: var(--grey-dark);
  }

  .post-content h1 {
    font-size: 1.625rem; /* 26px */
    margin: 0 0 1.5rem 0; /* Unified: 24px bottom */
    color: var(--navy-dark);
    line-height: 1.4;
    font-weight: 700;
  }

  .post-content h1:first-child {
    margin-top: 0;
  }

  .post-content h2 {
    font-size: 1.375rem; /* 22px */
    margin: 2.5rem 0 1rem 0; /* Unified: 40px top, 16px bottom */
    color: var(--navy-dark);
    line-height: 1.4;
    font-weight: 700;
  }

  .post-content h3 {
    font-size: 1.125rem; /* 18px */
    margin: 2rem 0 0.75rem 0; /* Unified: 32px top, 12px bottom */
    color: var(--navy);
    line-height: 1.5;
    font-weight: 600;
  }

  /* Less space when headings follow each other */
  .post-content h2 + h3 {
    margin-top: 1.5rem; /* Unified: 24px */
  }

  .post-content h3 + h4 {
    margin-top: 1.25rem; /* Unified: 20px */
  }

  .post-content h4 {
    font-size: 1rem; /* 16px */
    margin: 1.75rem 0 0.75rem 0; /* Unified: 28px top, 12px bottom */
    color: var(--navy);
    line-height: 1.5;
    font-weight: 600;
  }

  .post-content p {
    margin: 0 0 1.25rem 0; /* Unified: 20px bottom */
    line-height: 1.7;
  }

  .post-content strong {
    font-weight: 600;
    color: var(--navy-dark);
  }

  /* Strong as section label (standalone or as only child in paragraph) */
  .post-content p strong:only-child,
  .post-content > strong {
    display: block;
    margin-top: 1.5rem; /* Unified: 24px above label */
    margin-bottom: 0.5rem; /* Unified: 8px below label */
  }

  .post-content ul,
  .post-content ol {
    margin: 1.25rem 0; /* Unified: 20px top AND bottom */
    padding-left: 2rem;
    list-style-position: outside;
  }

  .post-content li {
    margin: 0.5rem 0; /* Unified: 8px between items */
    line-height: 1.7;
    padding-left: 0;
  }

  /* Fix nested lists */
  .post-content ul ul,
  .post-content ol ul,
  .post-content ul ol,
  .post-content ol ol {
    margin: 0.5rem 0 0.5rem 1.5rem;
    padding-left: 0;
  }

  .post-content a {
    color: var(--accent);
    text-decoration: underline;
    transition: var(--transition-base);
  }

  .post-content a:hover {
    color: var(--accent-dark);
  }

  .post-content img {
    max-width: 100%;
    height: auto;
    border-radius: 8px;
    margin: 2rem 0;
    box-shadow: var(--shadow);
  }

  .post-content blockquote {
    border-left: 4px solid var(--accent);
    padding-left: 1.5rem;
    margin: 2rem 0;
    font-style: italic;
    color: var(--grey);
  }

  .post-content code {
    background: var(--grey-100);
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    font-size: 0.9em;
    font-family: 'Courier New', monospace;
  }

  .post-content pre {
    background: var(--grey-100);
    padding: 1.5rem;
    border-radius: 8px;
    overflow-x: auto;
    margin: 1.5rem 0;
  }

  .post-content pre code {
    background: none;
    padding: 0;
  }

  @media (max-width: 768px) {
    .blog-post {
      padding: 4rem 0 3rem;
    }

    .post-content {
      font-size: 0.9375rem; /* 15px on mobile */
    }

    .post-content h1 {
      font-size: 1.375rem; /* 22px on mobile */
      margin: 1.5rem 0 0.875rem;
    }

    .post-content h2 {
      font-size: 1.25rem; /* 20px on mobile */
      margin: 2rem 0 0.75rem;
    }

    .post-content h3 {
      font-size: 1.0625rem; /* 17px on mobile */
      margin: 1.5rem 0 0.625rem;
    }

    .post-content h4 {
      font-size: 0.9375rem; /* 15px on mobile */
      margin: 1.25rem 0 0.5rem;
    }

    .post-content ul,
    .post-content ol {
      padding-left: 1.5rem; /* Maintain indentation on mobile */
    }

    .post-content p {
      margin-bottom: 0.875rem;
    }
  }
</style>
